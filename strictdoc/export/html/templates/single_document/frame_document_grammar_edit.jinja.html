<turbo-frame data-controller="modal_controller">
<sdoc-backdrop>
  <form
    method="POST"
    data-turbo="true"
    action="/actions/document/save_grammar"
  >
    <sdoc-modal>
      <sdoc-modal-header>
        Edit document grammar
      </sdoc-modal-header>

      <sdoc-modal-content>
        <sdoc-form-descr>
        <b>StrictDoc conventions:</b><br>
        The requirements fields above the reserved "TITLE" field are dedicated to meta information and will be rendered as single-line. The fields below the reserved "STATEMENT" field are multiline and should be used for fields with more descriptive text.
        </sdoc-form-descr>

        <input type="hidden" id="document_mid" name="document_mid" value="{{form_object.document_mid}}"/>

        <sdoc-form-fields id="document__editable_grammar_fields">
        {%- for field in form_object.fields -%}
          {%- include "single_document/frame_document_grammar_edit_custom_field.jinja.html" -%}
        {%- endfor -%}
        </sdoc-form-fields>

        <sdoc-form-footer>
          <a
              class="action_button"
              href="/actions/document/add_grammar_field?document_mid={{form_object.document_mid}}"
              data-turbo="true"
              data-action-type="add_field"
              data-testid="form-add-grammar-field-action"
              {# TODO: https://github.com/strictdoc-project/strictdoc/issues/884 #}
              onclick="setTimeout(()=> {this.scrollIntoView()},100)"
            >{% include "_res/svg_ico16_add.jinja.html" %} Add grammar field</a>
          </sdoc-form-footer>
      </sdoc-modal-content>

      <sdoc-modal-footer>
          <button
            class="action_button"
            type="submit"
            data-testid="form-submit-action"
          >Save</button>

          <button
            class="action_button"
            type="button"
            stimulus-modal-cancel-button
            data-testid="form-cancel-action"
          >Cancel</button>
      </sdoc-modal-footer>

    </sdoc-form>
  </form>
</sdoc-backdrop>
</turbo-frame>
