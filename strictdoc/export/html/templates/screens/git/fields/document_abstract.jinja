
{% set node = document %}
{% set document_change = change_stats.find_change(document) %}

{% if node.free_texts|length > 0 %}
{% set free_text = node.free_texts[0] %}
{% set free_text_md5 = self_stats.get_md5_by_node(free_text) %}
{% set free_text_modified = not other_stats.contains_free_text_md5(free_text_md5) %}
<div class="diff_node_fields">
<details
  {% if free_text_modified %}
    modified="{{ side }}"
  {% endif %}
>
  <summary>
  {%- with badge_text = "abstract" -%}
    {%- include "components/badge/index.jinja" -%}
  {%- endwith -%}
  </summary>

  <div
    class="sdoc_pre_content"
  >
    {%- if document_change is not none -%}
      {%- set colored_diff = document_change.get_colored_free_text_diff(side) -%}
      {%- if colored_diff is not none -%}
        {{ colored_diff }}
      {%- else -%}
        {{ free_text.get_parts_as_text_escaped() }}
      {%- endif -%}
    {%- else -%}
        {{ free_text.get_parts_as_text_escaped() }}
    {%- endif -%}
  </div>
</details>
</div>
{% endif %}
