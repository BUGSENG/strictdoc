<div
  class="main"
  js-pan_with_space="true"
>
  <style>
    td {
        border-bottom: 1px solid gray;
    }
  </style>
  <table>
  <tr>
    <th>
      Node
    </th>

    {% for known_relation_ in known_relations_list %}
      <th>
      {{ known_relation_[0] }}
      {% if known_relation_[1] is not none %}
      {{ known_relation_[1] }}
      {% endif %}
      </th>
    {% endfor %}
  </tr>

  {%- for document in traceability_index.document_tree.document_list -%}
    <tr>
      <td colspan="100">
        <h3 class="requirements-coverage-document-title" id="{{ loop.index }}">{{ document.title }}</h3>
      </td>
    </tr>
    {%- set document_iterator = traceability_index.get_document_iterator(document) -%}

    {%- for section_or_requirement in document_iterator.all_content() %}
      {%- if section_or_requirement.is_requirement %}
        <tr>
          <td>
            <section class="content_section">
              {%- set requirement = section_or_requirement %}
              <div class="content_item" data-role="current">
                {%- with anchor=link_renderer.render_local_anchor(section_or_requirement) -%}
                  {% include "screens/requirements_coverage/requirement.jinja.html" %}
                {%- endwith -%}
              </div>
            </section>
          </td>

          {% for known_relation_ in known_relations_list %}
            <td>
            {% if known_relation_[0] == "Parent" %}
              {% for parent_requirement_, _ in traceability_index.get_parent_relations_with_role(requirement, known_relation_[1]) %}
                {%- with anchor=link_renderer.render_local_anchor(parent_requirement_), requirement=parent_requirement_ -%}
                  → {% include "screens/requirements_coverage/requirement.jinja.html" %}
                {%- endwith -%}
              {% endfor %}

              {% for child_requirement_, _ in traceability_index.get_child_relations_with_role(requirement, known_relation_[1]) %}
                {%- with
                  anchor=link_renderer.render_local_anchor(child_requirement_),
                  requirement=child_requirement_
                -%}
                  ← {% include "screens/requirements_coverage/requirement.jinja.html" %}
                {%- endwith -%}
              {% endfor %}
            {% elif known_relation_[0] == "File" %}
              {% if project_config.is_activated_requirements_to_source_traceability() %}
                {% include "screens/requirements_coverage/file.jinja" %}
              {% endif %}
            {% endif %}
            </td>
          {% endfor %}

        </tr>
      {%- endif %}
    {%- endfor %}
  {%- endfor %}
  </table>
</div>
{# /.main #}
